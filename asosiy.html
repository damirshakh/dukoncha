<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dukon Loyihasi</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        header,
        footer {
            background: #333;
            color: #fff;
            text-align: center;
            padding: 1em;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            padding: 10px;
        }
        
        .grid img {
            width: 100%;
            height: auto;
            cursor: pointer;
            border-radius: 8px;
        }
        
        .page {
            display: none;
            padding: 10px;
        }
        
        .active {
            display: block;
        }
        
        .products {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .product {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
        }
        
        .product img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
            margin-right: 10px;
        }
        
        .product-info {
            flex-grow: 1;
        }
        
        button {
            padding: 6px 10px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .back-btn {
            margin-bottom: 10px;
            background: #007bff;
        }
        
        .cart-page .product {
            justify-content: flex-start;
            gap: 10px;
        }
    </style>
</head>

<body>

    <header>
        <h1>DAMIR SHAKH</h1>
        <button onclick="showPage('cart')">üõí –°–∞–≤–∞—Ç</button>
    </header>

    <!-- Bosh sahifa -->
    <div id="home" class="page active">
        <div class="grid">
            <img src="rasmlar/ichimliklar1.jpg" onclick="openCategory('category1')" />
            <img src="rasmlar/sav.webp" onclick="openCategory('category2')" />
            <img src="rasmlar/shirinliklar.webp" onclick="openCategory('category3')" />
            <img src="rasmlar/holodilnik.jpg" onclick="openCategory('category4')" />
            <img src="rasmlar/aralash.jpg" onclick="openCategory('category5')" />
            <img src="rasmlar/idishlar.jpg" onclick="openCategory('category6')" />
        </div>
    </div>
    <!-- Bosh sahifa -->

    <!-- Ichimlilar Sahifasi -->
    <div id="category1" class="page">
        <button class="back-btn" onclick="showPage('home')">‚¨Ö–ë–æ—à —Å–∞—Ö–∏—Ñ–∞</button>
        <div class="products">
            <div class="product">
                <img src="ichimliklar/drive.jpg" />
                <div class="product-info">Drive 70 —Å–æ–º</div>
                <button onclick="addToCart('Drive 70 —Å–æ–º')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="ichimliklar/pepsi.avif" />
                <div class="product-info">Pepsi 80 —Å–æ–º</div>
                <button onclick="addToCart('Pepsi 80 —Å–æ–º')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="ichimliklar/fanta.png" />
                <div class="product-info">Fanta 80 —Å–æ–º</div>
                <button onclick="addToCart('Fanta 80 —Å–æ–º')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="ichimliklar/cola.webp" />
                <div class="product-info">CocaCola 80 —Å–æ–º</div>
                <button onclick="addToCart('CocaCola 80 —Å–æ–º')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="ichimliklar/choy.jpg" />
                <div class="product-info">–°—É–ª—Ç–∞–Ω –ß–∞–π 60 —Å–æ–º</div>
                <button onclick="addToCart('–°—É–ª—Ç–∞–Ω –ß–∞–π 60 —Å–æ–º')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="ichimliklar/royal.jpeg" />
                <div class="product-info">Royal 50 —Å–æ–º</div>
                <button onclick="addToCart('Royal 50 —Å–æ–º')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
        </div>
    </div>
    <!-- Ichimlilar Sahifasi tugadi -->

    <!-- Savzavotlar Sahifasi -->
    <div id="category2" class="page">
        <button class="back-btn" onclick="showPage('home')">‚¨Ö–ë–æ—à —Å–∞—Ö–∏—Ñ–∞</button>
        <div class="products">
            <div class="product">
                <img src="s/bodring.jpeg" />
                <div class="product-info">–ë–æ–¥—Ä–∏–Ω–≥ 80 —Å–æ–º </div>
                <button onclick="addToCart('–ë–æ–¥—Ä–∏–Ω–≥ 80 —Å–æ–º –∫–≥')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="s/kartoshka.jpeg" />
                <div class="product-info">–ö–∞—Ä—Ç–æ—à–∫–∞ 40 —Å–æ–º </div>
                <button onclick="addToCart('–ö–∞—Ä—Ç–æ—à–∫–∞ 40 —Å–æ–º –∫–≥')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="s/olma.jpeg" />
                <div class="product-info">–û–ª–º–∞ 60 —Å–æ–º</div>
                <button onclick="addToCart('–û–ª–º–∞ 60 —Å–æ–º –∫–≥')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="s/piyoz.jpeg" />
                <div class="product-info">–ü–∏—ë–∑ 25 —Å–æ–º</div>
                <button onclick="addToCart('–ü–∏—ë–∑ 25 —Å–æ–º –∫–≥')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="s/pomidor.jpeg" />
                <div class="product-info">–ü–∞–º–∏–¥–æ—Ä 100 —Å–æ–º</div>
                <button onclick="addToCart('–ü–∞–º–∏–¥–æ—Ä 100 —Å–æ–º –∫–≥')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
            <div class="product">
                <img src="s/savzi.jpeg" />
                <div class="product-info">–°–∞–≤–∑–∏ 50 —Å–æ–º</div>
                <button onclick="addToCart('–°–∞–≤–∑–∏ 50 —Å–æ–º –∫–≥')">+ –°–∞–≤–∞—Ç–≥–∞</button>
            </div>
        </div>
    </div>
    <!-- Savzavotlar Sahifasi tugadi -->

    <!-- Shirinliklar sahifasi -->
    <div id="category3" class="page">
        <button class="back-btn" onclick="showPage('home')">‚¨Ö Bosh sahifaga</button>
        <div class="products">
            <div class="product">
                <img src="sh/snikers.jpeg" />
                <div class="product-info">Snickers 550 —Å–æ–º </div>
                <button onclick="addToCart('Snickers 550 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="sh/shkaladlik.jpeg" />
                <div class="product-info">SFAD 280 —Å–æ–º </div>
                <button onclick="addToCart('SFAD 280 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="sh/qumlik.jpeg" />
                <div class="product-info">–ü–µ—á–µ–Ω—å–µ –° –∫–∞–ø–ª—è–º–∏ 350 —Å–æ–º</div>
                <button onclick="addToCart('–ü–µ—á–µ–Ω—å–µ –° –∫–∞–ø–ª—è–º–∏ 350 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="sh/podushka.jpeg" />
                <div class="product-info">–ü–æ–¥—É—à–µ—á–∫–∏ 250 —Å–æ–º</div>
                <button onclick="addToCart('–ü–æ–¥—É—à–µ—á–∫–∏ 250 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="sh/kitkat.jpeg" />
                <div class="product-info">Kit Kat 550 —Å–æ–º</div>
                <button onclick="addToCart('Kit Kat 550 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="sh/jek.jpeg" />
                <div class="product-info">–î–∂–µ–∫ 420 —Å–æ–º</div>
                <button onclick="addToCart('–î–∂–µ–∫ 420 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
        </div>
    </div>
    <!-- Shirinliklar sahifasi tugadi -->

    <!-- Gusht mahsulotlari -->
    <div id="category4" class="page">
        <button class="back-btn" onclick="showPage('home')">‚¨Ö Bosh sahifaga</button>
        <div class="products">
            <div class="product">
                <img src="h/akarachka.jpeg" />
                <div class="product-info">–û–∫–∞—Ä–∞—á–∫–∞ 240 —Å–æ–º </div>
                <button onclick="addToCart('–û–∫–∞—Ä–∞—á–∫–∞ 240 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="h/cgucgvara.jpeg" />
                <div class="product-info">–ß—É—á–≤–∞—Ä–∞ 120 —Å–æ–º —à—Ç</div>
                <button onclick="addToCart('–ß—É—á–≤–∞—Ä–∞ 120 —Å–æ–º —à—Ç')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="h/oyoqcha.jpeg" />
                <div class="product-info">–û—ë–∫—á–∞ 290 —Å–æ–º </div>
                <button onclick="addToCart('–û—ë–∫—á–∞ 290 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="h/qanot.jpeg" />
                <div class="product-info">–ö–∞–Ω–æ—Ç—á–∞ 320 —Å–æ–º </div>
                <button onclick="addToCart('–ö–∞–Ω–æ—Ç—á–∞ 320 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="h/qiyma.jpeg" />
                <div class="product-info">–ö–∏–π–º–∞ 120 —Å–æ–º —à—Ç</div>
                <button onclick="addToCart('–ö–∏–π–º–∞ 120 —Å–æ–º —à—Ç')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="h/tovuq.jpeg" />
                <div class="product-info">–¢–æ–≤—É–∫ 300 —Å–æ–º </div>
                <button onclick="addToCart('–¢–æ–≤—É–∫ 300 —Å–æ–º –∫–≥')">+ Savatga</button>
            </div>
        </div>
    </div>
    <!-- Gusht mahsulotlari tugadi -->

    <!-- aralash mahsulotlari -->
    <div id="category5" class="page">
        <button class="back-btn" onclick="showPage('home')">‚¨Ö Bosh sahifaga</button>
        <div class="products">
            <div class="product">
                <img src="a/aprel.jpeg" />
                <div class="product-info">Aprel 120 —Å–æ–º 900–≥</div>
                <button onclick="addToCart('Aprel 120 —Å–æ–º 900–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="a/machalka.jpeg" />
                <div class="product-info">–ì—É–±–∫–∞ 15 —Å–æ–º</div>
                <button onclick="addToCart('–ì—É–±–∫–∞ 15 —Å–æ–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="a/shampun.jpeg" />
                <div class="product-info">–®–∞–º–ø—É–Ω—å 300 —Å–æ–º</div>
                <button onclick="addToCart('–®–∞–º–ø—É–Ω—å 300 —Å–æ–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="a/aprel.jpeg" />
                <div class="product-info">Aprel 120 —Å–æ–º 1.800–≥</div>
                <button onclick="addToCart('Aprel 120 —Å–æ–º 1.800–≥')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="a/sovun.jpeg" />
                <div class="product-info">–°–æ–≤—É–Ω 45 —Å–æ–º</div>
                <button onclick="addToCart('–°–æ–≤—É–Ω 45 —Å–æ–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="a/suyuq.avif" />
                <div class="product-info">–ú—ã–ª–∞ 70 —Å–æ–º </div>
                <button onclick="addToCart('–ú—ã–ª–∞ 70 —Å–æ–º ')">+ Savatga</button>
            </div>
        </div>
    </div>
    <!-- aralash mahsulotlari tugadi -->

    <!-- idish mahsulotlari -->
    <div id="category6" class="page">
        <button class="back-btn" onclick="showPage('home')">‚¨Ö Bosh sahifaga</button>
        <div class="products">
            <div class="product">
                <img src="i/choynak.jpeg" />
                <div class="product-info">–ß–æ–π–Ω–∞–∫ 100 —Å–æ–º</div>
                <button onclick="addToCart('–ß–æ–π–Ω–∞–∫ 100 —Å–æ–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="i/lagancha1.jpeg" />
                <div class="product-info">–õ–∞–≥–∞–Ω—á–∞ 14 —Å–æ–º 0.5—Å–º</div>
                <button onclick="addToCart('–õ–∞–≥–∞–Ω—á–∞ 14 —Å–æ–º 0.5—Å–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="i/lagancha2.jpg" />
                <div class="product-info">–õ–∞–≥–∞–Ω—á–∞ 15 —Å–æ–º 0.6—Å–º</div>
                <button onclick="addToCart('–õ–∞–≥–∞–Ω—á–∞ 15 —Å–æ–º 0.6—Å–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="i/osh.jpeg" />
                <div class="product-info">–û—à –ª–∞–≥–∞–Ω 45 —Å–æ–º</div>
                <button onclick="addToCart('–û—à –ª–∞–≥–∞–Ω 45 —Å–æ–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="i/piyala.webp" />
                <div class="product-info">–ü–∏—ë–ª–∞ 14 —Å–æ–º</div>
                <button onclick="addToCart('–ü–∏—ë–ª–∞ 14 —Å–æ–º')">+ Savatga</button>
            </div>
            <div class="product">
                <img src="i/saladga.jpeg" />
                <div class="product-info">–°–∞–ª–∞–¥ –õ–∞–≥–∞–Ω—á–∞ 30 —Å–æ–º</div>
                <button onclick="addToCart('–°–∞–ª–∞–¥ –õ–∞–≥–∞–Ω—á–∞ 30 —Å–æ–º')">+ Savatga</button>
            </div>
        </div>
    </div>
    <!-- idish mahsulotlari tugadi -->

    <!-- Savat sahifasi -->
    <div id="cart" class="page cart-page">
        <button class="back-btn" onclick="showPage('home')">‚¨Ö Bosh sahifaga</button>
        <h2>Savat</h2>
        <div id="cart-items"></div>
    </div>
    <!-- Savat sahifasi tugadi -->

    <!-- script qismi  -->
    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if (id === 'cart') renderCart();
        }

        function openCategory(catId) {
            showPage(catId);
        }

        function addToCart(name) {
            const product = event.target.closest('.product');
            const imgSrc = product.querySelector('img').src;

            // Narxni ajratib olish
            const priceMatch = name.match(/(\d+)\s*—Å–æ–º/i);
            if (!priceMatch) {
                alert("Narx topilmadi.");
                return;
            }
            const unitPrice = parseInt(priceMatch[1]);

            let amount = 1;
            let totalPrice = unitPrice;
            let displayName = name;

            if (/kg|–∫–≥/i.test(name)) {
                const weight = prompt(`${name}\n–ù–µ—á–∞ –∫–∏–ª–æ–≥—Ä–∞–º–º? (–ú–∞—Å–∞–ª–∞–Ω: 0.5 –∫–≥)`);
                if (!weight || isNaN(weight)) return;

                amount = parseFloat(weight);
                totalPrice = Math.round(unitPrice * amount);
                displayName += ` (${amount} –∫–≥)`;
            } else {
                const count = prompt(`${name}\n–ù–µ—á—Ç–∞? (–ú–∞—Å–∞–ª–∞–Ω: 3)`);
                if (!count || isNaN(count)) return;

                amount = parseInt(count);
                totalPrice = unitPrice * amount;
                displayName += ` (${amount} –î–æ–Ω–∞)`;
            }

            cart.push({
                name: displayName,
                img: imgSrc,
                total: totalPrice
            });
            localStorage.setItem('cart', JSON.stringify(cart));
            alert(`${displayName} savatga qo‚Äòshildi!`);
        }


        function renderCart() {
            const container = document.getElementById('cart-items');
            container.innerHTML = '';

            if (cart.length === 0) {
                container.innerHTML = '<p>Savat bo‚Äòsh</p>';
                return;
            }

            let total = 0;

            cart.forEach((item, index) => {
                const el = document.createElement('div');
                el.className = 'product';

                const img = document.createElement('img');
                img.src = item.img;

                const nameDiv = document.createElement('div');
                nameDiv.className = 'product-info';
                nameDiv.textContent = item.name;

                const priceMatch = item.name.match(/(\d+)/);
                if (priceMatch) {
                    total += item.total || parseInt(priceMatch[0]);
                }

                const delBtn = document.createElement('button');
                delBtn.textContent = '‚ùå O‚Äòchirish';
                delBtn.style.background = '#dc3545';
                delBtn.onclick = () => {
                    cart.splice(index, 1);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
                };

                el.appendChild(img);
                el.appendChild(nameDiv);
                el.appendChild(delBtn);
                container.appendChild(el);
            });

            // Jami narx va buyurtma tugmasi
            const totalDiv = document.createElement('div');
            totalDiv.style.marginTop = '15px';
            totalDiv.innerHTML = `<strong>–£–º—É–º–∏–π —Å—É–º–º–∞:</strong> ${total} —Å–æ–º`;

            const orderBtn = document.createElement('button');
            orderBtn.textContent = 'üì¶ –ë—É—é—Ä—Ç–º–∞ –±–µ—Ä–∏—à';
            orderBtn.style.marginTop = '10px';
            orderBtn.style.background = '#ffc107';
            orderBtn.onclick = () => {
                const user = JSON.parse(localStorage.getItem('user'));
                if (!user) {
                    alert("Iltimos, avval ro'yxatdan o'ting.");
                    window.location.href = "register.html";
                    return;
                }

                let message = `üõç *Yangi buyurtma!*\n`;
                message += `üë§ Ism: ${user.name}\nüìû Tel: ${user.phone}\n`;
                message += `\nüßæ Mahsulotlar:\n`;

                cart.forEach(item => {
                    message += `‚Ä¢ ${item.name}\n`;
                });

                message += `\nüí∞ Umumiy: ${total} —Å–æ–º`;

                const TOKEN = '7054436051:AAFq4jcrD5MbFsQBX218M65qHZ4NCgik3y4'; // Tokenni bu yerga yozing
                const CHAT_ID = '6449328525'; // Chat ID bu yerga

                fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            chat_id: CHAT_ID,
                            text: message,
                            parse_mode: 'Markdown'
                        })
                    })
                    .then(res => res.json())
                    .then(res => {
                        alert('Buyurtma qabul qilindi! üòä');
                        cart = [];
                        localStorage.setItem('cart', JSON.stringify(cart));
                        renderCart();
                    })
                    .catch(err => {
                        alert('Xatolik yuz berdi. Iltimos, qayta urinib ko‚Äòring.');
                    });
            };

            container.appendChild(totalDiv);
            container.appendChild(orderBtn);
        }
    </script>
    <!-- script qismi tugadi  -->

</body>

</html>